(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pf-dynamic"],{c083:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page",on:{click:t.checkForSidebarToOpen}},[t.sidebar?r("Drawer",{ref:"sidebar",attrs:{title:t.sidebar.props.title,theme:t.sidebar.props.theme,width:t.sidebar.props.width},on:{hide:function(e){t.sidebar=null}}},[r("RenderBlock",{attrs:{block:t.sidebar.slots.default,product:t.route.sku||t.$route.path}})],1):t._e(),"product"===t.route.type?r("Product",{attrs:{id:t.route.entityId},on:{loadError:function(e){return t.loadRoute(t.$route.path,!0)}}}):"category"!==t.route.type||t.$rogue.featureFlags.flags.rfk_fallback?"category"===t.route.type&&t.$rogue.featureFlags.flags.rfk_fallback?r("CategoryFallback",{attrs:{id:t.route.entityId},on:{loadError:function(e){return t.loadRoute(t.$route.path,!0)}}}):"cms"===t.route.type?r("CMS",{attrs:{identifier:t.route.entityId},on:{loadError:function(e){return t.loadRoute(t.$route.path,!0)}}}):"error"===t.route.type||404===t.route.status?r("err404"):r("loading"):r("Category",{attrs:{id:t.route.entityId},on:{loadError:function(e){return t.loadRoute(t.$route.path,!0)}}})],1)},n=[],a=r("a34a"),u=r.n(a),i=r("2f62"),c=r("ed66"),s=r("65d4");function d(t,e,r,o,n,a,u){try{var i=t[a](u),c=i.value}catch(s){return void r(s)}i.done?e(c):Promise.resolve(c).then(o,n)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(o,n){var a=t.apply(e,r);function u(t){d(a,o,n,u,i,"next",t)}function i(t){d(a,o,n,u,i,"throw",t)}u(void 0)}))}}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b={4691:"storage-landing",6043:"facility-outfitting-landing",6069:"garage-gyms-landing",6071:"affiliate-gyms-landing",6075:"training-gyms-landing"};function g(t){if("undefined"!==typeof window){for(var e=document.querySelectorAll("a[categoryid].active"),r=0;r<e.length;r+=1)e[r].classList.remove("active");if(t)for(var o=document.querySelectorAll('a[categoryid="'.concat(t,'"]')),n=0;n<o.length;n+=1)o[n].classList.add("active")}}var h={name:"DynamicPage",components:{Loading:c["a"],Category:function(){return Promise.all([r.e("page-deals~pf-category~pf-category-fallback"),r.e("pf-category")]).then(r.bind(null,"48fe"))},CategoryFallback:function(){return Promise.all([r.e("page-deals~pf-category~pf-category-fallback"),r.e("pf-category-fallback")]).then(r.bind(null,"3411"))},Product:function(){return Promise.all([r.e("bundle-group~events~pf-product"),r.e("pf-product")]).then(r.bind(null,"01aa"))},CMS:function(){return r.e("spa-cms").then(r.bind(null,"bd84"))}},data:function(){return{error:!1,sidebar:null}},computed:f({},Object(i["c"])({route:function(t){return t.route},overlay:function(t){return t.overlay}})),watch:{"$route.path":function(t){this.loadRoute(t)},overlay:function(t){t&&t!==this.sidebar&&this.sidebar&&this.$refs.sidebar&&this.$refs.sidebar.hide()}},created:function(){this.$rogue.ssr||this.loadRoute(this.$route.path)},serverPrefetch:function(){var t=this;return l(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadRoute(t.$route.path);case 2:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){g()},methods:{getFromStores:function(t){var e=this.$store.state,r=e.products,o=e.categories,n=e.cms;if(r.byUrl[t]){var a,u=r.byUrl[t],i=null===(a=r.products[u])||void 0===a?void 0:a.sku;return{type:"product",entityId:u,sku:i,path:t}}return o.byUrl[t]?{type:"category",entityId:o.byUrl[t],path:t}:n.byUrl[t]?{type:"cms",entityId:n.byUrl[t],path:t}:void 0},loadRoute:function(t,e){var r=this;return l(u.a.mark((function o(){var n,a,i,c,d;return u.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=(null===(n=r.route)||void 0===n?void 0:n.path)===t?r.route:r.getFromStores(t),!(!i||e||null!==(a=r.route.meta)&&void 0!==a&&a.isCMSPage)){o.next=6;break}return o.next=4,r.loadFromServer(t);case 4:c=o.sent,e&&i&&Object(s["b"])(c,i)?(r.$rogue.log.warn("Route server disagreement for ".concat(t," - cannot load ").concat(i.type," ").concat(i.entityId),i),i={status:404,error:"route_not_found",type:"error",path:t}):i=c;case 6:if(!i){o.next=19;break}if("category"!==i.type){o.next=17;break}if(g(i.entityId),!b[i.entityId]||r.$route.query.__showDfltCategory){o.next=15;break}return d=b[i.entityId],r.$store.commit("setRoute",{type:"loading"}),o.next=14,r.$store.dispatch("cms/load",d);case 14:r.$store.state.cms.cms[d]?(i.type="cms",i.entityId=d):console.error("Unable to load static page for category");case 15:o.next=18;break;case 17:g();case 18:r.$store.commit("setRoute",i);case 19:case"end":return o.stop()}}),o)})))()},loadFromServer:function(t){var e=this;return l(u.a.mark((function r(){var o,n,a,i,c,s,d,l,p,f,y,b;return u.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("/404"!==t){r.next=2;break}return r.abrupt("return",{status:404,error:"route_not_found",type:"error",path:t});case 2:return r.prev=2,e.$store.commit("setRoute",{type:"loading"}),r.next=6,e.$rogue.fetch("/svc_route/route?url=".concat(encodeURIComponent(t)).concat(e.$rogue.appContext?"&isMobileApp=1":""));case 6:o=r.sent,r.next=13;break;case 9:return r.prev=9,r.t0=r["catch"](2),e.$rogue.log.info("Unable to load route for ".concat(t),r.t0),r.abrupt("return",{status:404,error:"route_not_found",type:"error",path:t});case 13:if(n=o,a=n.redirectType,i=n.redirectTarget,c=o,s=c.requestPath,d=c.productId,l=c.cmsId,p=c.categoryId,f=c.entityId,y=c.entityType,t&&s&&t.toLowerCase()!=="/".concat(s.toLowerCase())&&(i="/".concat(s.toLowerCase()),a=301),!a){r.next=39;break}if(i){r.next=20;break}return e.$rogue.log.error("Redirect without target - ".concat(t)),r.abrupt("return",{status:400,error:"invalid_redirect",type:"error",path:t});case 20:if(i!==t){r.next=23;break}return e.$rogue.log.error("Redirect loop - ".concat(i)),r.abrupt("return",{status:400,error:"invalid_redirect",type:"error",path:t});case 23:if(0!==i.indexOf("http")){r.next=26;break}return"undefined"!==typeof window&&(window.location=i),r.abrupt("return",{status:a||301,path:i});case 26:if(b="".concat("/"!==i.charAt(0)?"/":"").concat(i),e.$rogue.log.info("Redirecting from ".concat(t," to ").concat(b)),!e.$rogue.ssr){r.next=31;break}return e.$rogue.log.info("SSR 301"),r.abrupt("return",{status:301,path:b});case 31:return r.prev=31,r.next=34,e.$router.replace(b);case 34:return r.abrupt("return",void 0);case 37:r.prev=37,r.t1=r["catch"](31);case 39:if(!d){r.next=42;break}return e.$store.commit("products/setIdForUrl",{id:d,url:t}),r.abrupt("return",{type:"product",entityId:d,path:t});case 42:if(!l){r.next=45;break}return e.$store.commit("cms/setIdForUrl",{id:l,url:t}),r.abrupt("return",{type:"cms",entityId:l,path:t});case 45:if(!p){r.next=47;break}return r.abrupt("return",{type:"category",entityId:p,path:t});case 47:if(!f||!y){r.next=49;break}return r.abrupt("return",{type:y,entityId:f,path:t});case 49:return e.$rogue.log.warn("Route without data: ".concat(t),o),r.abrupt("return",{type:"error",status:400,error:"route_without_data",path:t});case 51:case"end":return r.stop()}}),r,null,[[2,9],[31,37]])})))()},checkForSidebarToOpen:function(t){var e=this;if(t.target instanceof HTMLElement){var r,o=t.target.closest("a"),n=null===o||void 0===o?void 0:o.getAttribute("href");if(!n){var a=t.target.closest("button");n=null===a||void 0===a?void 0:a.getAttribute("data-link")}if(0===(null===(r=n)||void 0===r?void 0:r.indexOf("#"))&&"#"!==n){var u,i,c={};if("cms"===this.route.type){var s=this.route.path.replace(/^\//,""),d=this.$store.state.cms.cms[s]||Object.values(this.$store.state.cms.cms||{}).find((function(t){return t.url===e.route.entityId}));c=null===d||void 0===d?void 0:d.roguebuilder}else if("product"===this.route.type){var l;c=null===(l=this.$store.state.products.products[this.route.entityId])||void 0===l?void 0:l.roguebuilder}var p=null===(u=c)||void 0===u||null===(i=u.slots.sidebars)||void 0===i?void 0:i.find((function(t){return t.props.id===n.substring(1)}));p&&(t.preventDefault(),t.stopPropagation(),this.sidebar=p)}}}}},v=h,m=r("2877"),w=Object(m["a"])(v,o,n,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=pf-dynamic.5fbdd064.js.map